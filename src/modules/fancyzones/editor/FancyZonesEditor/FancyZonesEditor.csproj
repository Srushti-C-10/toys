<Project Sdk="Microsoft.NET.Sdk.WindowsDesktop">
  <PropertyGroup>
    <TargetFramework>netcoreapp3.0</TargetFramework>
    <OutputType>WinExe</OutputType>
    <UseWPF>true</UseWPF>
    
    <PublishReadyToRun>true</PublishReadyToRun>
    <RuntimeIdentifier>win10-x64</RuntimeIdentifier>
    <TieredCompilation>true</TieredCompilation>

    <ProductName>FancyZonesEditor</ProductName>
    <Copyright>Copyright (C) 2019 Microsoft Corp.</Copyright>
    <Company>Microsoft Corp.</Company>
    <Version>0.14.1.0</Version>
    
    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    <AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
    <OutDir></OutDir>
  </PropertyGroup>

  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <WarningLevel>4</WarningLevel>
    <Prefer32Bit>false</Prefer32Bit>
    <CodeAnalysisRuleSet>..\..\..\..\codeAnalysis\Rules.ruleset</CodeAnalysisRuleSet>
    <RunCodeAnalysis>false</RunCodeAnalysis>
    <ErrorReport>prompt</ErrorReport>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <ErrorReport>prompt</ErrorReport>
    <RunCodeAnalysis>false</RunCodeAnalysis>
    <WarningLevel>4</WarningLevel>
    <CodeAnalysisRuleSet>..\..\..\..\codeAnalysis\Rules.ruleset</CodeAnalysisRuleSet>
  </PropertyGroup>

  <!-- $(ProjectDir) is empty if we set it directly in OutDir, see https://github.com/dotnet/sdk/issues/677
       As a workaround, this Target sets the OutDir via CreateProperty, since $(ProjectDir) exists in Exec context. -->
  <Target Name="OutDirSetter" AfterTargets="PreBuildEvent">
    <Exec EchoOff="true" ConsoleToMsBuild="true" Command="echo $(ProjectDir)">
      <Output TaskParameter="ConsoleOutput" PropertyName="SavedProjectDir" />
    </Exec>
    <CreateProperty Value="$(SavedProjectDir)..\..\..\..\..\x64\$(Configuration)\modules\">
      <Output TaskParameter="Value" PropertyName="OutDir" />
    </CreateProperty>
  </Target>

  <ItemGroup>
    <PackageReference Include="MahApps.Metro" Version="2.0.0-alpha0605" />
    <Resource Include="images\*.png" />
    <Resource Include="Properties\Settings.settings" />
  </ItemGroup>
</Project>
